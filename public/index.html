<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>Flappy Bird</title><style>body{display:flex;justify-content:center;align-items:center;height:100vh;margin:0;font-family:Arial,sans-serif}#gameContainer{position:relative}#gameCanvas{border:1px solid #000}#score{position:absolute;top:10px;left:10px;font-size:18px;color:#000}#leaderboard{position:absolute;top:10px;right:10px;font-size:16px;color:#000}table{border-collapse:collapse;width:250px}td,th{border:1px solid #000;padding:8px;text-align:left}</style><div id=gameContainer><canvas height=400 id=gameCanvas width=400></canvas><div id=score>Score: 0 High Score: 0</div></div><div><div id=leaderboard><h3>Leaderboard</h3><table id=leaderboardTable><tr><th>Rank<th>Name<th>Score</table><br><br><div id=submitForm><input id=playerName placeholder="Your Name"> <button onclick=submitHighScore()>Submit High Score</button></div></div></div><script>async function fetchLeaderboard(){try{const e=await fetch("/leaderboard"),t=await e.json(),o=document.getElementById("leaderboardTable");o.innerHTML="<tr><th>Rank</th><th>Name</th><th>Score</th></tr>",t.forEach(((e,t)=>{const r=`<tr><td>${t+1}</td><td>${e.name}</td><td>${e.score}</td></tr>`;o.innerHTML+=r}))}catch(e){console.error("Error fetching leaderboard:",e)}}async function submitHighScore(){const e=document.getElementById("playerName").value,t=localStorage.getItem("flappyHighScore")||0;if(e&&t>0)try{if(!(await fetch("/leaderboard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,score:t})})).ok)throw new Error("Failed to submit high score");alert("High score submitted successfully!"),fetchLeaderboard()}catch(e){console.error("Error submitting high score:",e),alert("Failed to submit high score. Please try again.")}else alert("Please enter your name and achieve a score greater than 0 to submit.")}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("gameCanvas"),t=e.getContext("2d");let o=e.height/2,r=0,n=[],a=2,i=0,c=localStorage.getItem("flappyHighScore")||0;function h(){i>c&&(localStorage.setItem("flappyHighScore",i),c=i),o=e.height/2,r=0,i=0,n=[],l()}function l(){document.getElementById("score").textContent=`Score: ${i}  High Score: ${c}`}document.addEventListener("keydown",(e=>{"Space"!==e.code&&" "!==e.key&&"ArrowUp"!==e.key&&"W"!==e.key&&"w"!==e.key||(r=-12)})),function c(){t.clearRect(0,0,e.width,e.height),t.fillStyle="yellow",t.fillRect(50,o,30,30),function(){t.fillStyle="green";for(let o of n)t.fillRect(o.x,0,o.width,o.top),t.fillRect(o.x,o.bottom,o.width,e.height-o.bottom)}(),o+=r,r+=.6,function(){for(let e=0;e<n.length;e++)n[e].x-=a,n[e].x+n[e].width<0&&(n.splice(e,1),e--,i++);if(0===n.length||e.width-n[n.length-1].x>300){let t=225,o=50,r=e.height-50-t,a=Math.floor(Math.random()*(r-o+1)+o),i={x:e.width,top:a,bottom:a+t,width:30};n.push(i)}}(),function(){(o+30>e.height||o<0)&&h();for(let e of n)80>e.x&&50<e.x+e.width&&(o<e.top||o+30>e.bottom)&&h()}(),l(),requestAnimationFrame(c)}()})),fetchLeaderboard();</script>